appId: com.totality.app
productName: Totality
directories:
  buildResources: resources
  output: release
files:
  - dist
  - dist-electron
  - package.json
  - "!**/*.map"
  - "!**/*.d.ts"

# Native module configuration for better-sqlite3
asar: true
asarUnpack:
  - "node_modules/better-sqlite3/**/*"

# Rebuild native modules for Electron
npmRebuild: true
buildDependenciesFromSource: false

# Keep only English locale to reduce bundle size by ~30MB
electronLanguages:
  - en-US

win:
  target:
    - target: nsis
      arch:
        - x64
  icon: resources/icon.png

nsis:
  oneClick: false
  allowToChangeInstallationDirectory: true
  deleteAppDataOnUninstall: false
  include: resources/installer.nsh

mac:
  target:
    - dmg
  icon: resources/icon.icns
  identity: "Developer ID Application: Brandon Bidwell (LN7B5DD54X)"
  hardenedRuntime: true
  gatekeeperAssess: false
  entitlements: resources/entitlements.mac.plist
  entitlementsInherit: resources/entitlements.mac.plist
  notarize: true

linux:
  target:
    - AppImage
  icon: resources/icon.png
  category: Utility
