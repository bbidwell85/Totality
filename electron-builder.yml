appId: com.totality.app
productName: Totality

publish:
  provider: github
  owner: bbidwell85
  repo: Totality
directories:
  buildResources: resources
  output: release
files:
  - dist
  - dist-electron
  - package.json
  - "!**/*.map"
  - "!**/*.d.ts"
  - "!node_modules/sql.js/**/*"
  - "!**/node_modules/**/{test,tests,__tests__,__mocks__}/**/*"
  - "!**/node_modules/**/*.md"
  - "!**/node_modules/**/{.eslintrc*,.prettierrc*,tsconfig*.json}"
  - "!**/node_modules/**/CHANGELOG*"
  - "!**/node_modules/**/LICENSE*"
  - "!**/node_modules/**/{example,examples,doc,docs}/**/*"
  - "!**/node_modules/**/*.{ts,tsx}"
  - "!**/node_modules/**/.github/**/*"

# Native module configuration for better-sqlite3
asar: true
asarUnpack:
  - "**/*.node"

# Rebuild native modules for Electron
npmRebuild: true
buildDependenciesFromSource: false

# Keep only English locale to reduce bundle size by ~30MB
electronLanguages:
  - en-US

win:
  target:
    - target: nsis
      arch:
        - x64
  icon: resources/icon.png

nsis:
  artifactName: "${productName}-Setup-${version}.${ext}"
  oneClick: false
  allowToChangeInstallationDirectory: true
  allowElevation: true
  deleteAppDataOnUninstall: false
  include: resources/installer.nsh

mac:
  target:
    - dmg
    - zip
  icon: resources/icon.icns
  hardenedRuntime: true
  gatekeeperAssess: false
  entitlements: resources/entitlements.mac.plist
  entitlementsInherit: resources/entitlements.mac.plist
  notarize: false

linux:
  target:
    - AppImage
  icon: resources/icon.png
  category: Utility
